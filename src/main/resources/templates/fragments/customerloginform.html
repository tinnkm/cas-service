<div class="m-grid m-grid--hor m-grid--root m-page">
    <div class="m-grid__item m-grid__item--fluid m-grid m-grid--hor m-login m-login--signin m-login--2 m-login-2--skin-2 pagebg" id="login">
        <div class="m-grid__item m-grid__item--fluid	m-login__wrapper">
            <div class="m-login__container">
                <div class="m-login__logo">
                    <a href="#">
                        <img th:src="@{/images/logo-1.png}">
                    </a>
                </div>
                <div class="m-login__signin">
                    <div class="m-login__head">
                        <h3 class="m-login__title" th:utext="#{cas.login.logo.title}">
                        </h3>
                    </div>
                    <form  th:object="${credential}" class="m-login__form m-form" method="post" id="fm1"  action="login">
                        <div class="alert" th:if="${#fields.hasErrors('*')}">
                            <span th:each="err : ${#fields.errors('*')}" th:utext="${err}"/>
                        </div>
                        <section class="row" th:if="${recaptchaSiteKey}">
                            <div class="g-recaptcha" th:attr="data-sitekey=${recaptchaSiteKey}"/>
                        </section>
                        <input type="hidden" name="execution" th:value="${flowExecutionKey}"/>
                        <input type="hidden" name="_eventId" value="submit"/>
                        <input type="hidden" name="geolocation"/>
                        <div class="form-group m-form__group">
                            <div th:if="${openIdLocalId}">
                                <input type="hidden"
                                       id="username"
                                       name="username"
                                       class="form-control m-input"
                                       th:placeholder="#{cas.login.username.placeholder}"
                                       th:value="${openIdLocalId}"/>
                            </div>
                            <div th:unless="${openIdLocalId}">
                                <input class="form-control m-input"
                                       th:placeholder="#{cas.login.username.placeholder}"
                                       id="username"
                                       size="25"
                                       tabindex="1"
                                       type="text"
                                       th:disabled="${guaEnabled}"
                                       th:field="*{username}"
                                       th:accesskey="#{screen.welcome.label.netid.accesskey}"
                                       autocomplete="off"/>
                            </div>
                        </div>
                        <div class="form-group m-form__group">
                            <input class="form-control m-input m-login__form-input--last"
                                   type="password"
                                   id="password"
                                   th:placeholder="#{cas.login.password.placeholder}"
                                   th:accesskey="#{screen.welcome.label.password.accesskey}"
                                   th:field="*{password}"
                                   autocomplete="off"/>
                        </div>
                        <div class="row m-login__form-sub">
                            <div class="col m--align-left m-login__form-left">
                                <label class="m-checkbox  m-checkbox--focus">
                                    <input type="checkbox" name="rememberMe" id="rememberMe">
                                    [[#{cas.login.rememberMe}]]
                                    <span></span>
                                </label>
                            </div>
                            <div class="col m--align-right m-login__form-right">
                                <a href="javascript:;" id="m_login_forget_password" class="m-link" th:utext="#{cas.login.forgetPassword}">
                                </a>
                            </div>
                        </div>
                        <div class="m-login__form-action">
                            <input type="submit" id="m_login_signin_submit" class="btn btn-focus m-btn m-btn--pill m-btn--custom m-btn--air m-login__btn m-login__btn--primary"  name="submit"
                                    accesskey="l"
                                    th:value="#{screen.welcome.button.login}">
                            </input>
                        </div>
                    </form>
                </div>
                <!--<div class="m-login__signup">-->
                    <!--<div class="m-login__head">-->
                        <!--<h3 class="m-login__title">-->
                            <!--Sign Up-->
                        <!--</h3>-->
                        <!--<div class="m-login__desc">-->
                            <!--Enter your details to create your account:-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<form class="m-login__form m-form" action="">-->
                        <!--<div class="form-group m-form__group">-->
                            <!--<input class="form-control m-input" type="text" placeholder="Fullname" name="fullname" >-->
                        <!--</div>-->
                        <!--<div class="form-group m-form__group">-->
                            <!--<input class="form-control m-input" type="text" placeholder="Email" name="email" autocomplete="off">-->
                        <!--</div>-->
                        <!--<div class="form-group m-form__group">-->
                            <!--<input class="form-control m-input" type="password" placeholder="Password" name="password">-->
                        <!--</div>-->
                        <!--<div class="form-group m-form__group">-->
                            <!--<input class="form-control m-input m-login__form-input&#45;&#45;last" type="password" placeholder="Confirm Password" name="rpassword">-->
                        <!--</div>-->
                        <!--<div class="row form-group m-form__group m-login__form-sub">-->
                            <!--<div class="col m&#45;&#45;align-left">-->
                                <!--<label class="m-checkbox m-checkbox&#45;&#45;focus">-->
                                    <!--<input type="checkbox" name="agree">-->
                                    <!--I Agree the-->
                                    <!--<a href="#" class="m-link m-link&#45;&#45;focus">-->
                                        <!--terms and conditions-->
                                    <!--</a>-->
                                    <!--.-->
                                    <!--<span></span>-->
                                <!--</label>-->
                                <!--<span class="m-form__help"></span>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="m-login__form-action">-->
                            <!--<button id="m_login_signup_submit" class="btn btn-focus m-btn m-btn&#45;&#45;pill m-btn&#45;&#45;custom m-btn&#45;&#45;air  m-login__btn">-->
                                <!--Sign Up-->
                            <!--</button>-->
                            <!--&nbsp;&nbsp;-->
                            <!--<button id="m_login_signup_cancel" class="btn btn-outline-focus m-btn m-btn&#45;&#45;pill m-btn&#45;&#45;custom  m-login__btn">-->
                                <!--Cancel-->
                            <!--</button>-->
                        <!--</div>-->
                    <!--</form>-->
                <!--</div>-->
                <div class="m-login__forget-password">
                    <div class="m-login__head">
                        <h3 class="m-login__title" th:utext="#{cas.login.forgetPassword}">
                        </h3>
                        <div class="m-login__desc">
                            [[#{cas.login.restpassword}]]

                        </div>
                    </div>
                    <form th:object="${credential}" class="m-login__form m-form" action="login" id="reset-password">
                        <input type="hidden" name="execution" th:value="${flowExecutionKey}"/>
                        <input type="hidden" name="_eventId" value="resetPassword"/>
                        <div class="form-group m-form__group">
                            <input class="form-control m-input" type="text" th:placeholder="#{cas.login.username.placeholder}" name="username" id="change-username" autocomplete="off" th:field="*{username}"
                                   th:accesskey="#{screen.welcome.label.netid.accesskey}">
                        </div>
                        <div class="form-group m-form__group">
                            <input class="form-control m-input" type="password"  th:placeholder="#{cas.login.password.placeholder}" name="password" id="change-paasowrd" autocomplete="off" h:accesskey="#{screen.welcome.label.password.accesskey}"
                                   th:field="*{password}">
                        </div>
                        <div class="m-login__form-action">
                            <button id="m_login_forget_password_submit" class="btn btn-focus m-btn m-btn--pill m-btn--custom m-btn--air  m-login__btn m-login__btn--primaryr">
                                [[#{screen.submit}]]
                            </button>
                            &nbsp;&nbsp;
                            <button id="m_login_forget_password_cancel" class="btn btn-outline-focus m-btn m-btn--pill m-btn--custom m-login__btn">
                                [[#{screen.cancel}]]
                            </button>
                        </div>
                    </form>
                </div>
                <!--<div class="m-login__account">-->
							<!--<span class="m-login__account-msg">-->
								<!--Don't have an account yet ?-->
							<!--</span>-->
                    <!--&nbsp;&nbsp;-->
                    <!--<a href="javascript:;" id="m_login_signup" class="m-link m-link&#45;&#45;light m-login__account-link">-->
                        <!--Sign Up-->
                    <!--</a>-->
                <!--</div>-->
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" th:inline="javascript">
    var Login = function(){
        var login = $('#login');
        var showErrorMsg = function(form, type, msg) {
            var alert = $('<div class="m-alert m-alert--outline alert alert-' + type + ' alert-dismissible" role="alert">\
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>\
			<span></span>\
		</div>');

            form.find('.alert').remove();
            alert.prependTo(form);
            alert.animateClass('fadeIn animated');
            alert.find('span').html(msg);
        }
        var displayForgetPasswordForm = function() {
            login.removeClass('m-login--signin');
            login.removeClass('m-login--signup');

            login.addClass('m-login--forget-password');
            login.find('.m-login__forget-password').animateClass('flipInX animated');
        }
        $('#m_login_forget_password').click(function(e) {
            e.preventDefault();
            displayForgetPasswordForm();
        });
        var displaySignInForm = function() {
            login.removeClass('m-login--forget-password');
            login.removeClass('m-login--signup');

            login.addClass('m-login--signin');
            login.find('.m-login__signin').animateClass('flipInX animated');
        }
        var handleFormSwitch = function() {
            $('#m_login_forget_password').click(function(e) {
                e.preventDefault();
                displayForgetPasswordForm();
            });

            $('#m_login_forget_password_cancel').click(function(e) {
                e.preventDefault();
                displaySignInForm();
            });
        }
        var handleSignInFormSubmit = function() {
            $('#fm1,#reset-password').submit(function(e) {
                $("#password").val(md5($("#password").val()));
                var form = $(this).closest('form');
                form.validate({
                    rules: {
                        username: {
                            required: true,
                        },
                        password: {
                            required: true
                        }
                    }
                });

                if (!form.valid()) {
                    return false;
                }else{
                    var i = [[#{screen.welcome.button.loginwip}]]
                    $(":submit").attr("disabled", true);
                    $(":submit").attr("value", i);
                    return true;
                }
            });
        }
        return {
            init: function(){
                handleSignInFormSubmit();
                handleFormSwitch();
            }
        }
    }();

//    $("#fm1").submit(function () {
//        $(":submit").attr("disabled", true);
//        $(":submit").attr("value", i);
//        return true;
//    });
    $(function () {
        Login.init();
    });
</script>